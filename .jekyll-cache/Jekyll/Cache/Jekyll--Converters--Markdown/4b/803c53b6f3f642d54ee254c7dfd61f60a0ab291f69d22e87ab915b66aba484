I"€E<p><strong>êµ¬ê¸€í”Œë ˆì´ UI ê°œí¸</strong></p>

<ul>
  <li>ì¤‘ê°„ì— ë­í‚¹ì´ ìˆê³ </li>
  <li>ì¸ê¸° ì•±/ ê²Œì„ì´ ë””í´íŠ¸, ìµœê³  ë§¤ì¶œì„ í´ë¦­í•´ì•¼ ë­í‚¹ì´ ë°”ë€œ</li>
</ul>

<p><img src="../../../../img/2021-12-06-google_play2/image-20211206011526654.png" alt="image-20211206011526654" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span><span class="p">,</span> <span class="n">element</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://play.google.com/store/apps/category/GAME'</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">(</span><span class="s">'í¬ë¡¬ ë“œë¼ì´ë²„ ì£¼ì†Œ'</span><span class="p">)</span>

<span class="n">driver</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">result_html</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="n">page_source</span>
<span class="n">result_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">result_html</span><span class="p">,</span> <span class="s">'html.parser'</span><span class="p">)</span>

<span class="n">text1</span> <span class="o">=</span> <span class="n">result_soup</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span> <span class="p">:</span> <span class="s">'Si6A0c itIJzb'</span><span class="p">})</span>

<span class="n">app_list</span><span class="o">=</span><span class="p">[]</span>

<span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="n">text1</span> <span class="p">:</span>
    <span class="n">app_name</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'sT93pb DdYX5 OnEJge '</span><span class="p">}).</span><span class="n">get_text</span><span class="p">()</span>
    <span class="n">genre</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'span'</span><span class="p">,{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'sT93pb w2kbF '</span><span class="p">}).</span><span class="n">get_text</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">contents</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'w2kbF'</span><span class="p">})[</span><span class="mi">0</span><span class="p">].</span><span class="n">get_text</span><span class="p">())</span> <span class="o">==</span> <span class="s">'New'</span> <span class="p">:</span>
        <span class="n">grade</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'w2kbF'</span><span class="p">})[</span><span class="mi">2</span><span class="p">].</span><span class="n">get_text</span><span class="p">()</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="n">grade</span> <span class="o">=</span><span class="n">contents</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'w2kbF'</span><span class="p">})[</span><span class="mi">1</span><span class="p">].</span><span class="n">get_text</span><span class="p">()</span>
    <span class="n">app_list</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">app_name</span><span class="p">,</span> <span class="n">genre</span><span class="p">,</span> <span class="n">grade</span><span class="p">))</span>

<span class="n">app_list</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">app_list</span><span class="p">)</span>
<span class="n">app_list</span><span class="p">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'ì•±'</span><span class="p">,</span> <span class="s">'ì¹´í…Œê³ ë¦¬'</span><span class="p">,</span> <span class="s">'í‰ì '</span><span class="p">]</span>
<span class="n">app_list</span><span class="p">[</span><span class="s">'ì¸ê¸° ìˆœìœ„'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">app_list</span><span class="p">.</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">app_list</span> <span class="o">=</span> <span class="n">app_list</span><span class="p">[[</span><span class="s">'ì¸ê¸° ìˆœìœ„'</span><span class="p">,</span><span class="s">'ì•±'</span><span class="p">,</span> <span class="s">'ì¹´í…Œê³ ë¦¬'</span><span class="p">,</span> <span class="s">'í‰ì '</span><span class="p">]]</span>
<span class="c1"># print(app_list)
</span>
<span class="c1"># ìµœê³  ë§¤ì¶œ í•­ëª©ìœ¼ë¡œ ë°”ê¾¸ê¸°
</span><span class="n">top_grossing</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">'//*[@id="ct|apps_topgrossing"]'</span><span class="p">)</span>
<span class="n">top_grossing</span><span class="p">.</span><span class="n">click</span><span class="p">()</span>
<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1">#ìµœê³  ë§¤ì¶œ í•­ëª©ìœ¼ë¡œ í˜ì´ì§€ê°€ ë°”ë€Œê²Œ ê¸°ë‹¤ë¦¬ê¸°
</span>
<span class="n">result_html2</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="n">page_source</span>
<span class="n">result_soup2</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">result_html2</span><span class="p">,</span> <span class="s">'html.parser'</span><span class="p">)</span>
<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1">#í•œ ë²ˆ ë” ê¸°ë‹¤ë¦¬ê¸°
</span>
<span class="n">text2</span> <span class="o">=</span> <span class="n">result_soup2</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span> <span class="p">:</span> <span class="s">'Si6A0c itIJzb'</span><span class="p">})</span>

<span class="n">app_list2</span><span class="o">=</span><span class="p">[]</span>

<span class="k">for</span> <span class="n">contents2</span> <span class="ow">in</span> <span class="n">text2</span> <span class="p">:</span>
    <span class="n">app_name2</span> <span class="o">=</span> <span class="n">contents2</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'sT93pb DdYX5 OnEJge '</span><span class="p">}).</span><span class="n">get_text</span><span class="p">()</span>
    <span class="n">genre2</span> <span class="o">=</span> <span class="n">contents2</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'span'</span><span class="p">,{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'sT93pb w2kbF '</span><span class="p">}).</span><span class="n">get_text</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">contents2</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'w2kbF'</span><span class="p">})[</span><span class="mi">0</span><span class="p">].</span><span class="n">get_text</span><span class="p">())</span> <span class="o">==</span> <span class="s">'New'</span> <span class="p">:</span>
        <span class="n">grade2</span> <span class="o">=</span> <span class="n">contents2</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'w2kbF'</span><span class="p">})[</span><span class="mi">2</span><span class="p">].</span><span class="n">get_text</span><span class="p">()</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="n">grade2</span> <span class="o">=</span><span class="n">contents2</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s">'class'</span><span class="p">:</span><span class="s">'w2kbF'</span><span class="p">})[</span><span class="mi">1</span><span class="p">].</span><span class="n">get_text</span><span class="p">()</span>
    <span class="n">app_list2</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">app_name2</span><span class="p">,</span> <span class="n">genre2</span><span class="p">,</span> <span class="n">grade2</span><span class="p">))</span>

<span class="n">app_list2</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">app_list2</span><span class="p">)</span>
<span class="n">app_list2</span><span class="p">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'ì•±'</span><span class="p">,</span> <span class="s">'ì¹´í…Œê³ ë¦¬'</span><span class="p">,</span> <span class="s">'í‰ì '</span><span class="p">]</span>
<span class="n">app_list2</span><span class="p">[</span><span class="s">'ë§¤ì¶œ ìˆœìœ„'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">app_list2</span><span class="p">.</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">app_list2</span> <span class="o">=</span> <span class="n">app_list2</span><span class="p">[[</span><span class="s">'ë§¤ì¶œ ìˆœìœ„'</span><span class="p">,</span><span class="s">'ì•±'</span><span class="p">,</span> <span class="s">'ì¹´í…Œê³ ë¦¬'</span><span class="p">,</span> <span class="s">'í‰ì '</span><span class="p">]]</span>

<span class="c1"># print(app_list2)
</span>
<span class="n">driver</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">slack</span>
<span class="kn">from</span> <span class="nn">slacker</span> <span class="kn">import</span> <span class="n">Slacker</span>
<span class="kn">from</span> <span class="nn">tabulate</span> <span class="kn">import</span> <span class="n">tabulate</span>

<span class="n">slack_token</span> <span class="o">=</span> <span class="s">"ìŠ¬ë™ í† í° í‚¤"</span>
<span class="n">slack</span> <span class="o">=</span> <span class="n">Slacker</span><span class="p">(</span><span class="n">slack_token</span><span class="p">)</span>

<span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">today</span><span class="p">()</span>
<span class="n">today</span> <span class="o">=</span> <span class="n">today</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y-%m-%d"</span><span class="p">)</span>

<span class="n">message1</span> <span class="o">=</span> <span class="n">app_list</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">message1</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span><span class="s">'keys'</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s">'presto'</span><span class="p">,</span> <span class="n">showindex</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">slack</span><span class="p">.</span><span class="n">chat</span><span class="p">.</span><span class="n">post_message</span><span class="p">(</span><span class="s">"#bot_test"</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">today</span><span class="si">}</span><span class="s">'</span><span class="p">)</span> <span class="o">+</span> <span class="s">" `êµ¬ê¸€ ì¸ê¸° ìˆœìœ„ Top 45`"</span><span class="p">,</span> <span class="n">as_user</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">slack</span><span class="p">.</span><span class="n">chat</span><span class="p">.</span><span class="n">post_message</span><span class="p">(</span><span class="s">"#bot_test"</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">as_user</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="n">message2</span> <span class="o">=</span> <span class="n">app_list2</span>
<span class="n">text2</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">message2</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span><span class="s">'keys'</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s">'presto'</span><span class="p">,</span> <span class="n">showindex</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">slack</span><span class="p">.</span><span class="n">chat</span><span class="p">.</span><span class="n">post_message</span><span class="p">(</span><span class="s">"#ìŠ¬ë™ ì±„ë„ëª…"</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">today</span><span class="si">}</span><span class="s">'</span><span class="p">)</span> <span class="o">+</span> <span class="s">" `êµ¬ê¸€ ë§¤ì¶œ ìˆœìœ„ Top 45`"</span><span class="p">,</span> <span class="n">as_user</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">slack</span><span class="p">.</span><span class="n">chat</span><span class="p">.</span><span class="n">post_message</span><span class="p">(</span><span class="s">"#ìŠ¬ë™ ì±„ë„ëª…"</span><span class="p">,</span> <span class="n">text2</span><span class="p">,</span> <span class="n">as_user</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"ë¬¸ì œ ì—†ì´ ë³´ëƒˆìŠµë‹ˆë‹¤."</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="../../../../img/2021-12-06-google_play2/image-20211206011826663.png" alt="image-20211206011826663" style="zoom:67%;" /></p>

<p><img src="../../../../img/2021-12-06-google_play2/image-20211206011807814.png" alt="image-20211206011807814" style="zoom:67%;" /></p>

<p>í‰ì  ê¸ì–´ ì˜¤ëŠ”ë° í—¤ë§¸ëŠ”ë° ì•¼ë§¤ë¡œ ì²˜ë¦¬í•´ ë²„ë ¸ë‹¤</p>

<p>êµ¬ê¸€ í”Œë ˆì´ í‰ì ì€ í…ìŠ¤íŠ¸ê°€ ì•„ë‹ˆë¼ &lt;div aria-label&gt; ë¡œ ë˜ì–´ ìˆì–´ì„œ get_text()ê°€ ì•ˆ ë¨¹í˜</p>

<p>ë¬¸ì ì²˜ë¦¬í•œ contents.find_all(â€˜spanâ€™, {â€˜classâ€™:â€™w2kbFâ€™})[0].get_text()ê°€ Newë©´ ì•„ë˜ì™€ ê°™ì´</p>

<p><img src="../../../../img/2021-12-06-google_play2/image-20211206012028939.png" alt="image-20211206012028939" /></p>

<p>ì•± ì´ë¦„ ë‹¤ìŒì— ì‹ ê·œë¼ì„œ â€œNewâ€ê°€ ëœ¬ ì•±ì´ê³  ì•„ë‹ˆë©´ New í‘œì‹œê°€ ì—†ì–´ì„œ ifë¬¸ìœ¼ë¡œ ì²˜ë¦¬</p>

<p><img src="../../../../img/2021-12-06-google_play2/image-20211206012201610.png" alt="image-20211206012201610" /></p>

<p>[0],[1],[2]ê°€ ê°ê° New, ë¡¤í”Œë ˆì‰, 4.0 // ë¡¤í”Œë ˆì‰, 4.6 ì´ëŸ° ì‹</p>
:ET